<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="# 简介 Modbus 是一种在工业控制领域广泛使用的串行通信协议，以其开放性、高可靠性和简单易用而成为行业标准。 以下是关于 Modbus 的详细介绍： 历史背景：Modb">
<title>Modbus</title>

<link rel='canonical' href='https://hugiot.github.io/blog/p/modbus/'>

<link rel="stylesheet" href="/blog/scss/style.min.8e60baf4cd3fc55968717a6e39762f4d28ed7ef6007566b6c7970ad0fe907198.css"><meta property='og:title' content="Modbus">
<meta property='og:description' content="# 简介 Modbus 是一种在工业控制领域广泛使用的串行通信协议，以其开放性、高可靠性和简单易用而成为行业标准。 以下是关于 Modbus 的详细介绍： 历史背景：Modb">
<meta property='og:url' content='https://hugiot.github.io/blog/p/modbus/'>
<meta property='og:site_name' content='xiaocai&#39;s blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='IOT' /><meta property='article:published_time' content='2024-03-30T09:38:43&#43;08:00'/><meta property='article:modified_time' content='2024-03-30T09:38:43&#43;08:00'/>
<meta name="twitter:title" content="Modbus">
<meta name="twitter:description" content="# 简介 Modbus 是一种在工业控制领域广泛使用的串行通信协议，以其开放性、高可靠性和简单易用而成为行业标准。 以下是关于 Modbus 的详细介绍： 历史背景：Modb">
    <link rel="shortcut icon" href="/blog/favicon-32x32.png" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/blog/">
                
                    
                    
                    
                        
                        <img src="/blog/img/avatar_hu8419d381b80933b6a1dc67491cbf6cae_101357_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/blog">xiaocai&#39;s blog</a></h1>
            <h2 class="site-description">Love life, love sharing</h2>
        </div>
    </header><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/blog/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>首页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/blog/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归档</span>
            </a>
        </li>
        
        
        <li >
            <a href='/blog/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        
        <li >
            <a href='/blog/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>链接</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>暗色模式</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#简介">简介</a></li>
    <li><a href="#通讯方式">通讯方式</a></li>
    <li><a href="#功能码">功能码</a>
      <ol>
        <li><a href="#0x01-读线圈">0x01 读线圈</a></li>
        <li><a href="#0x05-写单个线圈">0x05 写单个线圈</a></li>
        <li><a href="#0x0f-写多个线圈">0x0F 写多个线圈</a></li>
        <li><a href="#0x02-读离散量输入">0x02 读离散量输入</a></li>
        <li><a href="#0x04-读输入寄存器">0x04 读输入寄存器</a></li>
        <li><a href="#0x03-读保持寄存器">0x03 读保持寄存器</a></li>
        <li><a href="#0x06-写单个保持寄存器">0x06 写单个保持寄存器</a></li>
        <li><a href="#0x10-写多个保持寄存器">0x10 写多个保持寄存器</a></li>
      </ol>
    </li>
    <li><a href="#报文结构">报文结构</a>
      <ol>
        <li><a href="#modbus-tcp">Modbus TCP</a></li>
        <li><a href="#modbus-rtu">Modbus RTU</a></li>
        <li><a href="#modbus-ascii">Modbus ASCII</a></li>
      </ol>
    </li>
    <li><a href="#扩展">扩展</a>
      <ol>
        <li><a href="#plc-地址">PLC 地址</a></li>
        <li><a href="#rs485">RS485</a></li>
        <li><a href="#串口">串口</a>
          <ol>
            <li><a href="#波特率">波特率</a></li>
            <li><a href="#数据位">数据位</a></li>
            <li><a href="#停止位">停止位</a></li>
            <li><a href="#奇偶性校验">奇偶性校验</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/blog/categories/dev/" style="background-color: #2a9d8f; color: #fff;">
                开发
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/blog/p/modbus/">Modbus</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2024-03-30 09:38:43</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 7 分钟
                </time>
            </div>
        

        
            <div>
                <svg role="img" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" aria-labelledby="bookOpenedIconTitle" stroke="#000" stroke-width="2" stroke-linecap="square" stroke-linejoin="miter" fill="none" color="#000"> <title id="bookOpenedIconTitle">Book</title> <path d="M12 6s-2-2-4-2-5 2-5 2v14s3-2 5-2 4 2 4 2c1.333-1.333 2.667-2 4-2 1.333 0 3 .667 5 2V6c-2-1.333-3.667-2-5-2-1.333 0-2.667.667-4 2z"/> <path stroke-linecap="round" d="M12 6v14"/> </svg>
                阅读量：<span id="busuanzi_value_page_pv">-</span>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="简介">
    <a href="#%e7%ae%80%e4%bb%8b">#</a>
    简介
</h2><p>Modbus 是一种在工业控制领域广泛使用的串行通信协议，以其开放性、高可靠性和简单易用而成为行业标准。</p>
<p>以下是关于 Modbus 的详细介绍：</p>
<ul>
<li>历史背景：Modbus 由 Modicon 公司（现为施耐德电气 Schneider Electric）于1979年发表，最初设计用于可编程逻辑控制器（PLC）之间的通信。</li>
<li>通信方式：Modbus 是一个应用层报文传输协议，它定义了设备之间通过不同总线或网络连接进行客户机/服务器通信的方式。这些连接可以是有线的，如EIA/TIA-232-E、EIA-422、EIA/TIA-485-A等，也可以是无线的。</li>
<li>协议类型：Modbus协议有几种变体，包括 Modbus-RTU、Modbus-ASCII 和 Modbus-TCP。其中，Modbus-RTU是最常用且实现简单的版本，特别适合在单片机上使用。</li>
<li>应用领域：Modbus主要用于连接PLC和其他自动化设备，如传感器、执行器等，用于监控、控制和数据采集。它的简单性和可靠性使得它在工业自动化领域非常受欢迎。</li>
<li>技术特点：Modbus 协议的简单性和可靠性是其最大的优点。它允许工程师轻松地在不同的设备之间进行通信，而不必担心复杂的配置或兼容性问题。此外，作为一个开放标准，Modbus 无需支付版权费用，这也是其在工业界广泛应用的原因之一。</li>
</ul>
<p>总的来说，Modbus 作为一种成熟的工业通信协议，因其易于实施和广泛的支持，成为了工业自动化系统中不可或缺的一部分。无论是在新建项目还是现有系统的升级改造中，Modbus 都是一个非常值得考虑的通信解决方案。</p>
<h2 id="通讯方式">
    <a href="#%e9%80%9a%e8%ae%af%e6%96%b9%e5%bc%8f">#</a>
    通讯方式
</h2><ul>
<li>串口（常用）</li>
<li>Modbus TCP（常用）</li>
<li>Modbus UDP</li>
<li>Modbus RTU/ASCII Over TCP</li>
<li>Modbus RTU/ASCII Over UDP</li>
</ul>
<h2 id="功能码">
    <a href="#%e5%8a%9f%e8%83%bd%e7%a0%81">#</a>
    功能码
</h2><blockquote>
<p>提示：以下请求和响应均忽略显示报文末尾的校验位（2字节）</p>
</blockquote>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>功能码（10进制）</th>
<th>功能码（16进制）</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0x01</td>
<td>读线圈</td>
</tr>
<tr>
<td>5</td>
<td>0x05</td>
<td>写单个线圈</td>
</tr>
<tr>
<td>15</td>
<td>0x0F</td>
<td>写多个线圈</td>
</tr>
<tr>
<td>2</td>
<td>0x02</td>
<td>读离散量输入</td>
</tr>
<tr>
<td>4</td>
<td>0x04</td>
<td>读输入寄存器</td>
</tr>
<tr>
<td>3</td>
<td>0x03</td>
<td>读保持寄存器</td>
</tr>
<tr>
<td>5</td>
<td>0x06</td>
<td>写单个保持寄存器</td>
</tr>
<tr>
<td>16</td>
<td>0x10</td>
<td>写多个保持寄存器</td>
</tr>
</tbody>
</table></div>
<h3 id="0x01-读线圈">
    <a href="#0x01-%e8%af%bb%e7%ba%bf%e5%9c%88">#</a>
    0x01 读线圈
</h3><ul>
<li>请求：01 01 00 00 00 0A</li>
</ul>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>从机地址</th>
<th>功能码</th>
<th>起始地址</th>
<th>数量</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>01</td>
<td>00 00</td>
<td>00 0A</td>
</tr>
</tbody>
</table></div>
<ul>
<li>响应：01 01 02 FF 03</li>
</ul>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>从机地址</th>
<th>功能码</th>
<th>数据长度（字节数）</th>
<th>数据（单字节存储 8 个线圈状态）</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>01</td>
<td>02</td>
<td>FF 03</td>
</tr>
</tbody>
</table></div>
<h3 id="0x05-写单个线圈">
    <a href="#0x05-%e5%86%99%e5%8d%95%e4%b8%aa%e7%ba%bf%e5%9c%88">#</a>
    0x05 写单个线圈
</h3><ul>
<li>请求：01 05 00 00 FF 00</li>
</ul>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>从机地址</th>
<th>功能码</th>
<th>线圈地址</th>
<th>值（0：00 00、1：FF 00）</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>05</td>
<td>00 00</td>
<td>FF 00</td>
</tr>
</tbody>
</table></div>
<ul>
<li>响应（原样返回）：01 05 00 00 FF 00</li>
</ul>
<h3 id="0x0f-写多个线圈">
    <a href="#0x0f-%e5%86%99%e5%a4%9a%e4%b8%aa%e7%ba%bf%e5%9c%88">#</a>
    0x0F 写多个线圈
</h3><ul>
<li>请求：01 0F 00 00 00 01 01 00</li>
</ul>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>从机地址</th>
<th>功能码</th>
<th>起始地址</th>
<th>数量</th>
<th>数据长度</th>
<th>值</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>0F</td>
<td>00 00</td>
<td>00 01</td>
<td>01</td>
<td>00</td>
</tr>
</tbody>
</table></div>
<ul>
<li>响应：01 0F 00 00 00 01</li>
</ul>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>从机地址</th>
<th>功能码</th>
<th>起始地址</th>
<th>数量</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>0F</td>
<td>00 00</td>
<td>00 01</td>
</tr>
</tbody>
</table></div>
<h3 id="0x02-读离散量输入">
    <a href="#0x02-%e8%af%bb%e7%a6%bb%e6%95%a3%e9%87%8f%e8%be%93%e5%85%a5">#</a>
    0x02 读离散量输入
</h3><ul>
<li>请求：01 02 00 00 00 0A</li>
</ul>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>从机地址</th>
<th>功能码</th>
<th>起始地址</th>
<th>数量</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>02</td>
<td>00 00</td>
<td>00 0A</td>
</tr>
</tbody>
</table></div>
<ul>
<li>响应：01 02 02 00 00</li>
</ul>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>从机地址</th>
<th>功能码</th>
<th>数据长度（字节数）</th>
<th>数据（单字节存储 8 个离散输入）</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>02</td>
<td>02</td>
<td>00 00</td>
</tr>
</tbody>
</table></div>
<h3 id="0x04-读输入寄存器">
    <a href="#0x04-%e8%af%bb%e8%be%93%e5%85%a5%e5%af%84%e5%ad%98%e5%99%a8">#</a>
    0x04 读输入寄存器
</h3><ul>
<li>请求：01 04 00 00 00 02</li>
</ul>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>从机地址</th>
<th>功能码</th>
<th>起始地址</th>
<th>数量</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>04</td>
<td>00 00</td>
<td>00 02</td>
</tr>
</tbody>
</table></div>
<ul>
<li>响应：01 04 04 00 01 00 02</li>
</ul>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>从机地址</th>
<th>功能码</th>
<th>数据长度（字节数）</th>
<th>数据（单寄存器占用2字节）</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>04</td>
<td>04</td>
<td>00 01 00 02</td>
</tr>
</tbody>
</table></div>
<h3 id="0x03-读保持寄存器">
    <a href="#0x03-%e8%af%bb%e4%bf%9d%e6%8c%81%e5%af%84%e5%ad%98%e5%99%a8">#</a>
    0x03 读保持寄存器
</h3><ul>
<li>请求：01 03 00 00 00 02</li>
</ul>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>从机地址</th>
<th>功能码</th>
<th>起始地址</th>
<th>数量</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>03</td>
<td>00 00</td>
<td>00 02</td>
</tr>
</tbody>
</table></div>
<ul>
<li>响应：01 03 04 00 01 00 02</li>
</ul>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>从机地址</th>
<th>功能码</th>
<th>数据长度（字节数）</th>
<th>数据（单寄存器占用2字节）</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>03</td>
<td>04</td>
<td>00 01 00 02</td>
</tr>
</tbody>
</table></div>
<h3 id="0x06-写单个保持寄存器">
    <a href="#0x06-%e5%86%99%e5%8d%95%e4%b8%aa%e4%bf%9d%e6%8c%81%e5%af%84%e5%ad%98%e5%99%a8">#</a>
    0x06 写单个保持寄存器
</h3><ul>
<li>请求：01 06 00 00 00 01</li>
</ul>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>从机地址</th>
<th>功能码</th>
<th>寄存器地址</th>
<th>值</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>06</td>
<td>00 00</td>
<td>00 01</td>
</tr>
</tbody>
</table></div>
<ul>
<li>响应（原样返回）：01 06 00 00 00 01</li>
</ul>
<h3 id="0x10-写多个保持寄存器">
    <a href="#0x10-%e5%86%99%e5%a4%9a%e4%b8%aa%e4%bf%9d%e6%8c%81%e5%af%84%e5%ad%98%e5%99%a8">#</a>
    0x10 写多个保持寄存器
</h3><ul>
<li>请求：01 10 00 00 00 01 02 00 01</li>
</ul>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>从机地址</th>
<th>功能码</th>
<th>起始地址</th>
<th>数量</th>
<th>数据长度</th>
<th>值</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>10</td>
<td>00 00</td>
<td>00 01</td>
<td>02</td>
<td>00 01</td>
</tr>
</tbody>
</table></div>
<ul>
<li>响应：01 10 00 00 00 01</li>
</ul>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>从机地址</th>
<th>功能码</th>
<th>起始地址</th>
<th>数量</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>10</td>
<td>00 00</td>
<td>00 01</td>
</tr>
</tbody>
</table></div>
<h2 id="报文结构">
    <a href="#%e6%8a%a5%e6%96%87%e7%bb%93%e6%9e%84">#</a>
    报文结构
</h2><h3 id="modbus-tcp">
    <a href="#modbus-tcp">#</a>
    Modbus TCP
</h3><blockquote>
<p>TCP 协议自带校验位，所以 Modbus TCP 报文中不包含校验位</p>
</blockquote>
<p>Modbus TCP 协议报文组成：<strong>MBAP 报文头</strong> + <strong>功能码</strong> + <strong>数据</strong></p>
<p><strong>MBAP 报文头</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>内容</th>
<th>长度</th>
<th>示例</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>事务处理标识</td>
<td>2 字节</td>
<td>00 01</td>
<td>可理解为报文序列号</td>
</tr>
<tr>
<td>协议标识</td>
<td>2 字节</td>
<td>00 00</td>
<td>00 00 表示 ModbusTCP 协议</td>
</tr>
<tr>
<td>长度</td>
<td>2 字节</td>
<td>00 06</td>
<td>表示接下来的数据长度，单位为字节</td>
</tr>
<tr>
<td>单元标识符</td>
<td>1 字节</td>
<td>01</td>
<td>可理解为设备地址</td>
</tr>
</tbody>
</table></div>
<p><strong>读保持寄存器请求示例</strong></p>
<ul>
<li>请求：00 01 00 00 00 06 01 03 00 00 00 01</li>
</ul>
<h3 id="modbus-rtu">
    <a href="#modbus-rtu">#</a>
    Modbus RTU
</h3><p>Modbus RTU 协议报文组成：<strong>Salve Address</strong> + <strong>功能码</strong> + <strong>数据</strong> + <strong>CRC</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>内容</th>
<th>长度</th>
<th>示例</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Slave Address</td>
<td>1 字节</td>
<td>01</td>
<td>可理解为设备地址</td>
</tr>
<tr>
<td>功能码</td>
<td>1 字节</td>
<td>06</td>
<td>06 写单个保持寄存器</td>
</tr>
<tr>
<td>数据</td>
<td>0～252 字节</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>CRC</td>
<td>2 字节</td>
<td>0D 0A</td>
<td>校验数据</td>
</tr>
</tbody>
</table></div>
<h3 id="modbus-ascii">
    <a href="#modbus-ascii">#</a>
    Modbus ASCII
</h3><blockquote>
<p>ASCII 模式下，每个 8 位的字节会被拆分成两个 ASCII 字符进行发送，因此发送的字符量比 RTU 增加一倍</p>
</blockquote>
<p>Modbus ASCII 协议报文组成：<strong>开始</strong> + <strong>地址</strong> + <strong>功能码</strong> + <strong>数据</strong> + <strong>LRC</strong> + <strong>结束</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>内容</th>
<th>长度</th>
<th>示例</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>开始</td>
<td>1 字节</td>
<td>3A</td>
<td>固定以英文冒号（ASCII码：0x3A）开始</td>
</tr>
<tr>
<td>地址</td>
<td>2 字节</td>
<td>30 31</td>
<td>可理解为设备地址，设备地址 01 拆分成两个 ASCII 码可得到：30 31</td>
</tr>
<tr>
<td>功能码</td>
<td>2 字节</td>
<td>30 36</td>
<td>写单个保持寄存器，功能码 06 拆分成两个 ASCII 码可得到：30 36</td>
</tr>
<tr>
<td>数据</td>
<td>0～252 字节</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>LRC</td>
<td>2 字节</td>
<td>-</td>
<td>校验数据</td>
</tr>
<tr>
<td>结束</td>
<td>2 字节</td>
<td>0D 0A</td>
<td>固定回车（0x0D）和换行符（0x0A）</td>
</tr>
</tbody>
</table></div>
<h2 id="扩展">
    <a href="#%e6%89%a9%e5%b1%95">#</a>
    扩展
</h2><h3 id="plc-地址">
    <a href="#plc-%e5%9c%b0%e5%9d%80">#</a>
    PLC 地址
</h3><p>在 Modbus 通信中，PLC 地址指的是映射到可编程逻辑控制器（PLC）内部的存储区的地址。</p>
<p>这些地址通常以10进制描述，共有5位数字。第一位代表寄存器的类型，比如4代表保持寄存器，而3代表输入寄存器。后四位数字则表示具体的寄存器编号。例如，地址40001对应于保持寄存器的第一个单元。在使用Modbus协议的设备或软件中，用户设置或看到的通常是Modbus数据地址。这些地址是用于访问特定数据的，它们通过各种&quot;功能&quot;代码来读写。</p>
<p>在 Modbus 通信协议中，数据的地址使用形式如 0x、1x、3x 和 4x 分别表示数字量输出、数字量输入、模拟量输入等数据地址。</p>
<p>这些地址在通信时会使用到，而在编程时，由于PLC地址前缀的区分作用，通常只需说明后四位数，并将其转换为四位十六进制地址。例如，PLC地址40001对应寻址地址0x0000。Modbus主设备指令将地址映射至正确的功能，以便发送到从站。Modbus主设备指令支持的地址范围包括00001至09999为离散输出（线圈），10001至19999为离散输入（触点），30001至39999为输入寄存器（通常是模拟量输入），以及40001至49999为保持寄存器。</p>
<p>总的来说，了解这些地址与PLC内部元件的对应关系对于实现精准控制非常重要，这也是自动化工程师必须掌握的知识点。</p>
<h3 id="rs485">
    <a href="#rs485">#</a>
    RS485
</h3><p>RS485 是一种用于物理通信层的<strong>串行</strong>通讯标准。</p>
<p>RS485，完整称呼为EIA/TIA-485，是从它的标准编号和制定标准的组织Electronic Industries Alliance (EIA)得来的。这个标准定义了信号传输的方法，属于开放系统互连模型的第一级。</p>
<p>RS485设计的初衷是为了克服RS232的局限性，提高数据传输的可靠性和距离。与RS232不同的是，RS485支持多点通信，可以实现更长距离的数据传输。它通过一对双绞线电缆进行差分信号传输，这种差分方式可以有效抵抗共模干扰，从而在噪声环境下保持数据的稳定性。</p>
<p>RS485通常采用半双工的通信方式，意味着在同一时间，数据只能在一个方向上传输。它使用两根或三根电线完成连接：数据线、带有反向数据的电线以及地线（0V）。由于其强大的抗干扰能力和简便的网络拓扑结构，RS485在工业控制系统中得到了广泛应用，例如自动化设备之间的通信、楼宇自动化系统等。</p>
<p>总的来说，RS485作为一种稳定可靠的工业通信标准，被广泛应用于需要远距离和多节点通信的场景中。</p>
<h3 id="串口">
    <a href="#%e4%b8%b2%e5%8f%a3">#</a>
    串口
</h3><p>串口是计算机上一种非常通用设备通信协议，串口是按位（bit）发送和接收数据。</p>
<h4 id="波特率">
    <a href="#%e6%b3%a2%e7%89%b9%e7%8e%87">#</a>
    波特率
</h4><p>衡量通信速度参数，表示每秒中传送的 bit 的个数；</p>
<p>例如：300 波特率表示每秒发送 300 个 bit；</p>
<p>波特率和距离成反比，高波特率常常用于放置的很近的仪器间通信。</p>
<h4 id="数据位">
    <a href="#%e6%95%b0%e6%8d%ae%e4%bd%8d">#</a>
    数据位
</h4><p>衡量通信中实际数据位的参数，计算机发送一个信息包，实际的数据不会是 8 位的；</p>
<p>比如，标准的 ASCII 码是 0～127（7位），扩展的 ASCII 码是 0～255（8位）；</p>
<p>如果数据使用简单的文本（标准 ASCII 码），那么每个数据包使用 7 位数据。</p>
<h4 id="停止位">
    <a href="#%e5%81%9c%e6%ad%a2%e4%bd%8d">#</a>
    停止位
</h4><p>表示单个包的最后一位，典型值为：1、2 位；</p>
<p>停止位不仅表示传输的结束，并且提供计算机校正时钟同步的机会。</p>
<h4 id="奇偶性校验">
    <a href="#%e5%a5%87%e5%81%b6%e6%80%a7%e6%a0%a1%e9%aa%8c">#</a>
    奇偶性校验
</h4><p>在串口通信中一种简单的检错方式，典型值为：不校验、偶校验、奇校验。</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/blog/tags/iot/">IOT</a>
        
    </section>


    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/blog/p/%E5%8D%95%E7%BD%91%E5%8D%A1%E5%A4%9Aip/">
        
        

        <div class="article-details">
            <h2 class="article-title">单网卡多IP</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/blog/p/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">
        
        

        <div class="article-details">
            <h2 class="article-title">正则表达式</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="hugiot/blog"
        issue-term="pathname"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    let utterancesLoaded = false;

    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;

        
        utterancesLoaded = true;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        if (!utterancesLoaded) return;
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2024 xiaocai&#39;s blog
    </section>
    
    <section class="powerby">
        使用 <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> 构建 <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.25.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>

    
        <section class="powerby">
            
                访问量：<span id="busuanzi_value_site_pv">-</span>
            

            
                &nbsp;&nbsp;/&nbsp;&nbsp;
                访客量：<span id="busuanzi_value_site_uv">-</span>
            
        </section>
    
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/blog/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    </body>
</html>
